# Инструкция по сборке Windows EXE

Эта инструкция поможет вам собрать симулятор WoW Mists of Pandaria Classic в виде исполняемого файла (.exe) для Windows.

## Предварительные требования

Для сборки вам понадобятся следующие инструменты:

1.  **Go (Golang)**: [Скачать Go](https://golang.org/dl/). Рекомендуется версия 1.23 или новее.
2.  **Node.js и npm**: [Скачать Node.js](https://nodejs.org/).
3.  **Make**: На Windows можно использовать `make` через [MinGW](http://www.mingw.org/) или [Chocolatey](https://chocolatey.org/packages/make). Если у вас нет `make`, вы можете запускать команды вручную (см. ниже).

## Шаги по сборке

### 1. Подготовка окружения

Откройте терминал (PowerShell или Command Prompt) в корневой папке проекта и выполните:

```bash
npm install
```

### 2. Генерация файлов (Protobuf и БД)

```bash
make proto
```
(Если `make` недоступен, это запускает `npx protoc ...` для генерации TypeScript и Go файлов из .proto файлов).

### 3. Сборка клиентской части (UI)

```bash
make dist/mop
```
Это соберет веб-интерфейс в папку `dist/mop`.

### 4. Сборка исполняемого файла (.exe)

Для сборки версии для Windows выполните:

```bash
make wowsimmop-windows.exe
```

После завершения в корне проекта появится файл `wowsimmop-windows.exe`.

## Экспорт логов для нейросети

В этой версии добавлена специальная функция для экспорта подробных данных, которые можно использовать для обучения нейросетей.

1. Запустите симулятор и настройте персонажа/ротацию.
2. В верхнем меню выберите **Export** -> **Neural Network**.
3. Нажмите кнопку **Run and Export**.
4. Симулятор запустит одну итерацию боя с включенным подробным логированием (включая логи принятия решений APL) и предложит скачать JSON файл.

Этот файл содержит:
- Исходный запрос со всеми настройками и APL ротацией.
- Полный текстовый лог боя с отметками времени, ресурсами, баффами и деталями выбора способностей в APL.
- Агрегированные метрики результата.

## Запуск

Просто запустите `wowsimmop-windows.exe`. Он откроет локальный сервер и автоматически запустит ваш браузер по умолчанию с интерфейсом симулятора.

---

## Ручная сборка (без Make)

Если у вас не установлен `make`, вы можете выполнить основные шаги вручную:

1.  **Установка зависимостей**: `npm install`
2.  **Сборка UI**: `npx vite build`
3.  **Сборка Go сервера**:
    ```bash
    cd sim/web
    go build -o ../../wowsimmop.exe main.go
    ```
    (Примечание: при ручной сборке без make могут не подтянуться иконки или встроенные статические файлы, если не настроены пути).

Рекомендуется использовать `make`, так как он автоматизирует копирование всех необходимых ресурсов в исполняемый файл.
